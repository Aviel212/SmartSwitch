<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="SmartSwitchJavaScriptAPI.js"></script>
    <script>
        function addUserTest() {
            addUser("testUser", "112233", print);
        }

        function getUserTest() {
            getUser("bbbbbbg", print, function (a, b, c) {
                console.log(a.responseText);
                console.log(b);
                console.log(c);
            });
        }

        function changePasswordTest() {
            changePassword("testUser", "123", print)
        }

        function getPlugTest() {
            getPlug("BC:DD:C2:23:D6:60", print);
        }

        function getUserPlugsTest() {
            getUserPlugs("yarden", print);
        }

        function updatePlugTest() {
            let plugProperties = {
                "mac": "BC:DD:C2:23:D6:60",
                "nickname": "Fan",
                "priority": Priorities.Nonessential
            }
            console.log(JSON.stringify(plugProperties));
            updatePlug(plugProperties, print);
        }

        function approvePlugTest() {
            approvePlug("BC:DD:C2:23:D6:60");
        }

        function denyPlugTest() {
            denyPlug("BC:DD:C2:23:D6:60");
        }

        function getPlugSamplesTest() {
            getPlugSamples("BC:DD:C2:23:D6:60", 7, function (samples) {
                for (let i in samples) {
                    samples[i].sampleDate = new Date(samples[i].sampleDate);
                    $("body").append($("<span>").html(JSON.stringify(samples[i])));
                    console.log(samples[i]);
                }
            })
        }

        function addTaskTest() {
            // a task that will turn a plug off in 5 minutes
            let d = new Date();
            d.setMinutes(d.getMinutes() + 5);
            let newTask = {
                operation: Operations.TurnOff,
                deviceMac: "BC:DD:C2:23:D6:60",
                taskType: TaskTypes.OneTime,
                startDate: d
            }
            
            addTask(newTask);
        }

        function print(data) {
            $("body").append($("<span>").html(JSON.stringify(data)));
        }

        function testTurnOn() {
            turnPlug('000', "BC:DD:C2:9E:0E:79", Operations.TurnOn);
        }

        function testTurnOff() {
            turnPlug('000', "BC:DD:C2:9E:0E:79", Operations.TurnOff);
        }
    </script>
    <title></title>
    <style>
        input, span {
            display: block;
            margin: 8px;
        }
    </style>
</head>
<body>
    <input type="button" value="addUserTest()" onclick="addUserTest()" />
    <input type="button" value="getUserTest()" onclick="getUserTest()" />
    <input type="button" value="changePasswordTest()" onclick="changePasswordTest()" />
    <input type="button" value="getPlugTest()" onclick="getPlugTest()" />
    <input type="button" value="getUserPlugsTest()" onclick="getUserPlugsTest()" />
    <input type="button" value="updatePlugTest()" onclick="updatePlugTest()" />
    <input type="button" value="approvePlugTest()" onclick="approvePlugTest()" />
    <input type="button" value="denyPlugTest()" onclick="denyPlugTest()" />
    <input type="button" value="getPlugSamplesTest()" onclick="getPlugSamplesTest()" />
    <input type="button" value="addTaskTest()" onclick="addTaskTest()" />
    <input type="button" value="testTurnOn()" onclick="testTurnOn()" />
    <input type="button" value="testTurnOff()" onclick="testTurnOff()" />
</body>
</html>