<title>Smart Switch - Power Consumption Page</title>
<meta charset="utf-8" />
<script src="scripts/jquery.js"></script>
<link href="styles/w3css.css" rel="stylesheet" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
    var val;
    var val1;
    var x='Min';
    var y = 'shekel';
    var data;

    window.onload = function () {
        var data = sessionStorage.getItem("data");
        var Min = {
            x: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30],
            y: data,
            type: 'scatter',
        };
        data = [Min];
        var Hour = {
            x: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
            y: data,
            type: 'scatter',
        };
        var Day = {
            x: [1, 2, 3, 4, 5, 6, 7],
            y: data,
            type: 'scatter',
        };
        document.getElementById("select1").onchange = function () {
            val = this.value;
            if (val == 1) { data = [Min]; x = "Min" }
            if (val == 2) { data = [Hour]; x = "Hour" }
            if (val == 3) { data = [Day]; x = "Day" }
            var layout = {
                xaxis: {
                    title: x
                },
                yaxis: {
                    title: y
                }

            }
            Plotly.newPlot('myDiv', data, layout, { showSendToCloud: true });
        };     
            document.getElementById("select2").onchange = function () {
               val1 = this.value;
                if (val1 == 1) { y = "shekel" }
                if (val1 == 2) { y = "KW" }
                var layout = {
                    xaxis: {
                        title: x
                    },
                    yaxis: {
                        title: y
                    }
                }
                Plotly.newPlot('myDiv', data, layout, { showSendToCloud: true });
            };           
        }
    
</script>


<div id="mainDiv">
    <br />
    <span>power consumption of</span><span id="devicespn"></span><span>:</span>
    <br /><br />
    <div>
        <div style="width:60%;float:left" id="myDiv">
        </div>
        <div style="width:40%;float:right">
            <span> time-axes:</span>
            <select id="select1">
                <option value="1">Minute</option>
                <option value="2">Hour</option>
                <option value="3">Day</option>
            </select>
            <br /><br />
            <span> shekel/kw:</span>
            <select id="select2">
                <option value="1">shekel</option>
                <option value="2">KW</option>
            </select>
            <br />
            <input type="text" id="amount" placeholder="amount"/>
        </div>
    </div>
</div>

<script>
    getPlugSamples(sessionStorage.getItem("currentSmartSwitchUserToken"), , $("#amount").val(), function (data) {
        sessionStorage.setItem("data", data);
        var Min = {
            x: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30],
            y: data,
            type: 'scatter',
        };
        var data1 = [Min];
        var layout = {
            xaxis: {
                title: 'Min'
            },
            yaxis: {
                title: 'shekel'
            }
        };

        Plotly.newPlot('myDiv', data1, layout, { showSendToCloud: true });
    })
    

</script>




